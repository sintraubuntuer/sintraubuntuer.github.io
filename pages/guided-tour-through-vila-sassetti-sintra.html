<!DOCTYPE html>
<html lang="en">
<head>

        <meta charset="utf-8" />
        <title>Guided Tour through Vila Sassetti - Sintra // Sintra Ubuntuer</title>
        <link rel="stylesheet" href="https://sintraubuntuer.github.io/theme/css/main.css" />

        <!-- Mobile Meta -->
      		<meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Bootstrap core CSS -->
        <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css" /> -->
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/css/bootstrap.css " />
            <!-- Font Awesome CSS -->
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />



        <link rel="stylesheet" type="text/css" href="https://sintraubuntuer.github.io/theme/css/appsCss/mainElmApp.css" />
        <link rel="stylesheet" type="text/css" href="https://sintraubuntuer.github.io/theme/css/appsCss/reset.css" />
        <link rel="stylesheet" type="text/css" href="https://sintraubuntuer.github.io/theme/css/appsCss/story.css" />
        <link rel="stylesheet" type="text/css" href="https://sintraubuntuer.github.io/theme/css/appsCss/github-markdown.css" />


                <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
                <script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>

                <style>
                    #mapid {
                        height: 400px;
                        width: 800px;
                        margin: auto;
                    }
                </style>





        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body class="no-trans">

		<!-- scrollToTop -->
		<!-- ================ -->

 		<div class="scrollToTop"><i class="icon-up-open-big"></i></div>

          		<!-- header start -->
          		<!-- ================ -->
          		<header class="header fixed clearfix navbar  fixed-top navbar-expand-sm">

          <nav class="navbar navbar-dark  navbar-fixed-top" >
              <div class="container">

              <button class="navbar-toggler hidden-md-up pull-xs-right" data-target="#collapsenav" data-toggle="collapse" type="button">
                      â˜°
                  </button>
              <div class="row">
                 <div class="col-lg-7 col-md-6 col-sm-12 col-xs-12">
                    <!-- <a class="navbar-brand" href="#home">Brand-1</a> -->
                    <!-- logo -->
							      <div class="logo smooth-scroll">
								        <a href="#banner"><img id="logo" class="img-circle" src="https://sintraubuntuer.github.io/theme/images/logo.jpg" alt="..."></a>
							      </div>

							      <!-- name-and-slogan -->
							      <div class="site-name-and-slogan smooth-scroll">
							        	<div class="site-name"><a href="https://sintraubuntuer.github.io/index.html">Sintra Ubuntuer </a></div>
							         	<!-- <div class="site-slogan"> <a target="_blank" href=""> </a></div> -->
						      	</div>
                 </div>
                  <div class="col-lg-5 col-md-6 col-sm-12 col-xs-12">
                      <div class="theMenu">
                      <div class="menuItems">
                       <div class="navbar-toggleable-sm collapse  text-xs-center" id="collapsenav">
                          <ul class="nav navbar-nav">
                            <!-- <li class="nav-item"><a class="nav-link" href="#">About</a></li> -->

                                           <li class="nav-item"><a class="nav-link" href="https://sintraubuntuer.github.io/index.html">Home</a></li>
                                           <li class="nav-item"><a class="nav-link" href="https://sintraubuntuer.github.io/index.html#about">About</a></li>


                                  <li class="nav-item"><a class="nav-link" href="https://sintraubuntuer.github.io/cronoIndex.html">Articles</a></li>

                                          <li class="nav-item"><a class="nav-link" href="https://sintraubuntuer.github.io/pages/apps.html">Apps</a></li>


                          </ul>
                      </div>
                    </div>
                  </div>
                  </div>

              </div>
            </div>
        </nav>


</header>
<!-- header end -->

<!-- banner start -->
<!-- ================ -->
<div id="banner" class="banner">
  <div class="banner-image"></div>
  <div class="banner-caption">
    <div class="container">
      <div class="row">
        <div class="col-md-8 col-md-offset-2 object-non-visible" data-animation-effect="fadeIn">
          <!--<h1 class="text-center"><span></span></h1>
          <p class="lead text-center"></p>
        -->
        </div>
      </div>
    </div>
  </div>
  <div class="arrow_down"><a class="arrowMoveDown" data-target="#MainContent"><img id="imgArrowDown" src="https://sintraubuntuer.github.io/theme/images/icons/arrow_down__black_M.png" /></a></div>
</div>
<!-- banner end -->

 <div id="MainContent">
    <div class="pure-g-r" id="layout">
        <!-- include 'sidebar.html'  -->
        <div class="pure-u-1">
            <div class="content">
                <h1 class="content-subhead">Guided Tour through Vila Sassetti - Sintra</h1>
                <div class="post-info-block" style="font-size: 0.8em;" >
                         <!-- <time class="published" datetime="2017-09-28T00:00:00+01:00"> -->
                        <div class="post-info"  >
                            <span> Published: </span>
                            <i class="fa fa-calendar"></i>
                             <time class="published" datetime="2017-09-28T00:00:00+01:00">

                                 Thu 28 September 2017
                             </time>
                        </div>


                        <div class="post-info"  >
                            <span> Last updated: </span>
                            <i class="fa fa-calendar"></i>
                             <time class="published" datetime="2019-10-05T00:00:00+01:00">

                                 Sat 05 October 2019
                             </time>
                        </div>


                </div>
                <br/>
                <p><p>this game/narrative is also part of a geocache ( published 05 Oct 2019 ) :
<a href="https://www.geocaching.com/geocache/GC8E7RT_visita-guiada-a-vila-sassetti" target="_blank">GC8E7RT</a></p>
<!-- merendas , funk da serra , gigante --></p>
                <br/>

                    <div id="mapAndApp">

                        <div id="mapid"></div>
                        <div id="elmAppOutputArea"> </div>
                    </div>

            </div>
        </div>
    </div>



</div>
        <!--
        <section id="extras" class="body text-center">
                <div class="blogroll">
                        <h2>Links</h2>
                        <ul>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://elm-lang.org">Elm</a></li>
                        </ul>
                </div><!-- /.blogroll

                <div class="social">
                        <h2>Social</h2>
                        <ul>

                            <li><a href="https://github.com/sintraubuntuer">Github</a></li>
                            <li><a href="https://instagram.com/serrot73">Instagram</a></li>
                        </ul>
                </div><  !-- /.social

        </section><!-- /#extras
       -->


      <br/>
      <br/>
      <br/>
      <br/>
      <br/>

        <!-- Footer -->
         <!-- /Footer -->

               <a href="#" class="back-to-top">Back to Top</a>











    <script type="text/javascript" src="https://sintraubuntuer.github.io/theme/plugins/jquery.min.js"></script>

   <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/js/bootstrap.js"></script>

    <!-- Modernizr javascript -->
    <script type="text/javascript" src="https://sintraubuntuer.github.io/theme/plugins/modernizr.js"></script>

    <!-- Isotope javascript -->
    <script type="text/javascript" src="https://sintraubuntuer.github.io/theme/plugins/isotope/isotope.pkgd.min.js"></script>

    <!-- Backstretch javascript -->
    <script type="text/javascript" src="https://sintraubuntuer.github.io/theme/plugins/jquery.backstretch.min.js"></script>

     <!-- Appear javascript -->
    <script type="text/javascript" src="https://sintraubuntuer.github.io/theme/plugins/jquery.appear.js"></script>


   <!-- Initialization of Plugins -->
		<script type="text/javascript" src="https://sintraubuntuer.github.io/theme/js/template.js" ></script>

		<!-- Custom Scripts -->
		<script type="text/javascript" src="https://sintraubuntuer.github.io/theme/js/custom.js" ></script>

    <link rel="stylesheet" href="https://sintraubuntuer.github.io/theme/css/defaultHighlight.css">
    <script type="text/javascript" src="https://sintraubuntuer.github.io/theme/js/highlight.pack.js"></script>
    <script type="text/javascript">hljs.initHighlightingOnLoad();</script>


    <script type="text/javascript">

        $(document).ready(function(){

            $(".banner-image").backstretch('https://sintraubuntuer.github.io/theme/images/banner.jpg');

        });

    </script>

        <script type="text/javascript" src="https://sintraubuntuer.github.io/theme/js/apps/guidedTourVilaSassetti_Elm019.js"></script>
        <script type="text/javascript">
            var node1 = document.getElementById('elmAppOutputArea');


                var initial_latitude;
                var initial_longitude;

                    initial_latitude = parseFloat(38.7952);

                    initial_longitude = parseFloat(-9.391733);

                    var mymap = L.map('mapid').setView([initial_latitude, initial_longitude], 18);
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mymap);


                var saveName = "guidedTourVilaSassettiElm019" + "_historyStr";


                    var elmApp = Elm.Main.init({
                        node: document.getElementById('elmAppOutputArea')
                        , flags: {
                            baseImgUrl: "https://sintraubuntuer.github.io/theme/images/guidedTourVilaSassettiAppImages/"
                            , baseSoundUrl: "https://sintraubuntuer.github.io/theme/sound/guidedTourVilaSassettiAppSound/"
                        }
                    }
                    );


                    elmApp.ports.saveHistoryToStorage.subscribe(function (history) {

                        localStorage.setItem(saveName, JSON.stringify(history));

                    });

                    elmApp.ports.sendRequestForStoredHistory.subscribe(function (data) {
                        var storedState = localStorage.getItem(saveName);
                        var storedHistory = storedState ? JSON.parse(storedState) : ({ "playerName": "", "lInteractions": new Array() , "lPrandomFloats" : new Array() });
                        elmApp.ports.getHistoryFromStorage.send(storedHistory)
                    });



                    elmApp.ports.sendRequestForGeolocation.subscribe(function (interactableId) {
                        if (!navigator.geolocation) {
                            console.log("Geolocation is not supported by your browser");
                            var failed_geolocation_info = { "interactableId": interactableId, "latitude": -999, "longitude": -999 };

                            elmApp.ports.getGeolocationFromBrowser.send(failed_geolocation_info);
                            //return ;
                        } else {

                            navigator.geolocation.getCurrentPosition(success, error);
                        }

                        function success(position) {
                            var latitude = position.coords.latitude;
                            var longitude = position.coords.longitude;

                            var geolocation_info = { "interactableId": interactableId, "latitude": latitude, "longitude": longitude };
                            elmApp.ports.getGeolocationFromBrowser.send(geolocation_info);

                        }

                        function error() {
                            //output.innerHTML = "Unable to retrieve your location";
                            console.log("Unable to retrieve your location");
                        }
                    });


                    elmApp.ports.setView.subscribe(function (data) {
                        mymap.setView.apply(mymap, data);
                    });


                    var myIcon = L.icon({

                        iconUrl: "https://sintraubuntuer.github.io/theme/images/guidedTourVilaSassettiAppImages/markers/mapmarker.png",
                        iconSize: [32, 32],
                    });

                    var myIconCurrent = L.icon({
                        iconUrl: "https://sintraubuntuer.github.io/theme/images/guidedTourVilaSassettiAppImages/markers/mapmarker_currentStage.png",
                        iconSize: [32, 32],
                    });

                    var myIconPlayer = L.icon({
                        iconUrl: "https://sintraubuntuer.github.io/theme/images/guidedTourVilaSassettiAppImages/markers/mapmarker_player.png",
                        iconSize: [32, 32],
                    });

                    var markerArray = new Array();

                    elmApp.ports.filterMarkersCmdPort.subscribe(function (data) {

                        markerArray.forEach(function (themarker) {
                            themarker.removeFrom(mymap);
                        });

                        var stageMarkerInfo = data.stageMarkerInfo;
                        stageMarkerInfo.forEach(function (coordsObj) {
                            var coords = coordsObj.coords;
                            var themarker;

                            if (coordsObj.marker_type == "current") {
                                themarker = L.marker(coords, { icon: myIconCurrent }).bindTooltip("current location :  \n  " + coordsObj.stageName + " ");
                            } else {
                                themarker = L.marker(coords, { icon: myIcon }).bindTooltip(" " + coordsObj.stageName + " ");
                            }
                            markerArray.push(themarker);
                            themarker.addTo(mymap);


                        });
                        // playerMarker
                        var thePlayerMarker = L.marker(data.playerCoords, { icon: myIconPlayer }).bindTooltip(" Player ");

                        markerArray.push(thePlayerMarker);
                        thePlayerMarker.addTo(mymap);
                    });




        </script>






</body>
</html>